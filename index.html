<!DOCTYPE html>
<html>
  <head>
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link href="./common.css" rel="stylesheet"/>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div id="dist">
        <div class="boss">
            <div class="boss-input" v-for="(i, index) in boss">
                <h5 class="mb-3">{{bossName[index]}}</h5>
                <div class="bossItem text-center mb-3">
                    <div v-for="j in 4">
                        <div class="row">
                            <div class="col" v-for="k in 4">{{itemName[(j*4)+k-5]}}</div>
                        </div>
                        <div class="row last">
                            <div class="num col" v-for="k in 4">
                                <div @click="numChange(-1, i, j, k)">-</div>
                                <div>{{count[i][items[(j*4)+k-5]]}}</div>
                                <div @click="numChange(1, i, j, k)">+</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="underline"></div>
        <h5 class="mb-3" style="padding: 25px 0 0 25px;">시세</h5>
        <div class="prices">
            <div class="price-input" v-for="(i, index) in items">
                <div class="input-group input-group-sm">
                    <span class="input-group-text">{{itemName[index]}}</span>
                    <input type="number" :class="'form-control '+(existYn[i]?'exist':'')" v-model="price[i]" />
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    var dist = new Vue({
      el: "#dist",
      data: {
        price: {},
        c:0,
        count:{},
        items:["extra", "small", "red", "blue", "addcube", "honor", "flame", "forflame", "darkflame", "rein", "forrein", "darkrein", "pos", "scroll", "pscroll", "ess"],
        itemName:["추경", "소형", "반빨", "반파", "수에큐", "명훈", "강환", "영환", "검환", "꺼불", "영꺼불", "검꺼불", "놀긍", "악스크롤", "프악", "태정"],
        boss:["lucid", "will", "sdedune", "dusle"],
        bossName:["루시드", "윌", "스데듄", "더슬"]
      },
      computed:{
          existYn () {
              const exist = {}
              if(this.count.lucid.addcube){
                for(let i in this.count){
                    for(let j in this.count[i]){
                        console.log(this.count[i][j], j)
                        if(this.count[i][j] > 0 && !exist[j]) exist[j] = true
                    }
                }
              }
              return exist;
          },
          total () {
              const exist = {}
              if(this.count.lucid.addcube){
                for(let i in this.count){
                    for(let j in this.count[i]){
                        console.log(this.count[i][j], j)
                        if(this.count[i][j] > 0 && !exist[j]) exist[j] = true
                    }
                }
              }
              return exist;
          }
      },
      methods:{
        numChange (type, i,j,k) {
            if(this.count){
                this.count = {
                    ...this.count,
                    [i]: {
                        ...this.count[i],
                        [this.items[(j*4)+k-5]]: (this.count[i][this.items[(j*4)+k-5]] + type >= 0? this.count[i][this.items[(j*4)+k-5]] + type:0)
                    }
                }
            }
        }
      },
      created(){
          for(let i of this.boss){
            var cnt = {}
            for(let j of this.items){
                if(j === "addcube"){
                    if(i === "lucid") cnt[j] = 9
                    else if(i === "will") cnt[j] = 9
                    else if(i === "sdedune") cnt[j] = 36
                    else if(i === "dusle") cnt[j] = 19
                } else cnt[j] = 0
            }
            this.count[i] = cnt
          }
      }
    });
  </script>
</html>
